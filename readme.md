# Git 学习（注：这里的文件将上传到远程仓库的feat/b1分支）
这个项目中我们学习如何使用git。

Git中，存在工作区、暂存区、本地仓库以及远程仓库。

---
# 基础部分
这部分主要学习如何操控**工作区、暂存区以及本地仓库**，学习将代码提交到本地仓库。

## Git创建本地仓库
在项目对应的文件夹（路径/目录）中，输入`git init`即可，可看到该路径下新生成了`.git`文件夹。

另外，如果想指定一个目录为本地代码仓库，输入指定路径即可，即：`git init [路径]`。

若想从远程仓库中下载一个项目，可以使用`git clone`命令，即：`git clone [url]`，
这里`url`是项目路径。

## Git查看当前状态
使用`git status`命令可查看当前目录下的文件状态。
例如，如果工作区的文件没提交到暂存区，则会显示：Untracked files。

每操作一步，都可通过`git status`命令查看当前状态。

## 将文件提交到暂存区
这一步是**将工作区的内容提交到暂存区**，本质上是**暂存文件的更改**。

使用`git add`命令可提交至暂存区。该命令有如下几点：
* `git add .`：该命令将当前目录下的所有文件全部提交至暂存区。
* `git add [file1] [file2]`：该命令仅将指定文件提交至暂存区。

## 查看暂存区文件
使用`git ls-files`命令可查看当前暂存区内文件。

## 将文件从暂存区提交至本地仓库
使用`git commit`命令可提交至本地仓库。该命令有如下几点：
* `git commit -m`：`-m`参数可直接在后面添加提交信息或日志，例如`git commit -m "first commit"`，代表这是第一次提交。如果不使用这个参数，则将会进入类似vim的界面，手动输入信息。一般可能不会这么用，**因为每个公司都有自己的提交信息格式要求**。
* `git commit -a`：`-a`参数将所有已跟踪（tracked）文件中的修改**暂存并提交**，简化了对已跟踪文件的修改进行提交的过程。这意味着不需要在输入`git commit -a`命令之前手动输入`git add`命令来暂存更改。
  * 实习的时候一般使用的是这个命令。
  * 这个命令并没有使用`-m`这个参数，因此还是会进入类似vim的界面，然后手动输入状态信息。
* `git commit -v`：`-v`参数将显示所有差异（diff）信息。
* `git commit -amend`：`-amend`参数用于**修改最近一次提交命令**。可对最后一次提交编辑，例如发现提交信息有误、有文件被遗漏等。**该命令可能会造成后续的冲突问题。**
  * 案例：假设忘记提交一个文件`importance.txt`，且提交信息有误，可以首先将遗漏文件添加至暂存区：`git add importance.txt`，然后提交：`git commit -amend -m "添加importance.txt文件"`。

综上，我们一般使用`git commit -a`命令，其次是`git commit -m`命令。

## 查看Git提交日志
`git log`命令可查看本地仓库的历史提交记录。有如下几点：
* `git log --oneline`：`--oneline`参数可查看历史记录的简介版本。
* `git log -5`：这里`-5`可以查看最近的5次提交记录。
* `git log --stat`：`-stat`参数可以增加显示修改的文件与行数。
* `git log --author`：`--author`参数可以只显示特定作者的提交。

日志部分先记这么多就行。

## 回退版本
当我们有了多次提交之后，我们可以通过`git reset`回退至之前某一个版本。该命令有如下几点：
* `git reset --soft`：`--soft`参数在回退的同时，将工作区与暂存区的文件保留。
* `git reset --hard`：`--hard`参数在回退的同时，将工作区与暂存区的文件删除，因此**谨慎使用**。
* `git reset --mixed`：`--mixed`参数为默认项，在回退的同时，工作区文件保留，暂存区文件删除。

注：`git reset`命令后接提交的哈希ID。

## 查看文件每一行变更历史
`git blame [file]`可追踪文件中每一行的变更历史，包括作者、提交哈希、提交日期和提交消息等信息。

---
# 升阶部分
这部分主要学习如何将本地仓库中的代码提交到远程仓库，以及**远程仓库与本地仓库之间的交互**。

## 本地仓库与远程仓库建立联系
若当前已有一个Github或其他远程仓库，可使用如下命令建立二者联系：
```shell
  git remote add origin xxxxx
```
这里xxx代表远程仓库的url或者ssh连接方式，origin代表远程仓库的名字。
在完成这步骤之后，可通过`git remote -v`确认当前下载（fetch）推送（push）的是哪一个远程仓库。

如果当前指向了错误的仓库，则可通过以下命令进行修正：
```shell
  git remote set-url origin xxxxx
```
这里可以将仓库指向正确的地址。

## 变更分支名称
采用`git branch -m master main`命令可将当前名为master的分支修改为main。

## 删除文件
### 方法1
在Linux系统中，采用`rm`命令可以删除文件。以名为`file.txt`的文件为例，若删除该文件，则输入命令：
```shell
  rm file.txt
```
此时，如果使用`git status`命令，可以发现显示`deleted file.txt`信息，这个时候需要输入以下命令：
```shell
  git add file.txt
```
来将该变更信息提交至暂存区。若想要最终提交这一信息，需使用命令：
```shell
  git commit
```

### 方法2
以上方法较为繁琐，这里我们可以采用如下方式：
```shell
  git rm file.txt
```
该命令可以在本地删除文件（即`rm file.txt`）的同时，向暂存区提交“文件被删除”这一信息。接下来，同样使用：
```shell
  git commit
```
以向本地仓库提交信息。

### 总结
`git add`命令与`git commit`命令，从操作效果上来看，可以理解为：**向暂存区与本地仓库提交操作信息**，
例如，若修改file.txt文件内容，则该命令表示“提交修改操作”；若删除file.txt文件，则该命令表示“提交删除操作”。
本质上，**暂存区与本地仓库记录的是文件的完整状态**，
若修改file.txt文件内容，该命令表示提交新内容；若删除file.txt文件，则提交“文件已删除”这一状态信息。

总结而言，当文件发生变化时，都需要通过这两个命令**提交并更新信息**。

## 远程仓库和本地仓库之间建立联系
使用`git fetch orgin main`命令。

## 变基
采用`git rebase origin main`命令可以将当前的代码应用到origin仓库的main分支上。

---


